<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>Gæ¤œå®š å­¦ç¿’ã‚¢ãƒ—ãƒª</title>
<style>
:root {
  --green: #10b981;
  --teal: #06b6d4;
  --orange: #f59e0b;
  --red: #ef4444;
  --bg: #0f172a;
  --card: #1e293b;
  --card-hover: #334155;
  --text: #f1f5f9;
  --text-sub: #94a3b8;
  --accent: #6366f1;
  --accent-hover: #818cf8;
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Sans', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* ===== HEADER ===== */
.header {
  background: linear-gradient(135deg, #1e1b4b, #312e81);
  padding: 20px;
  text-align: center;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3);
}
.header h1 {
  font-size: 1.3rem;
  font-weight: 700;
  letter-spacing: 0.05em;
}
.header-sub {
  font-size: 0.75rem;
  color: var(--text-sub);
  margin-top: 4px;
}

/* ===== SCREENS ===== */
.screen { display: none; padding: 16px; padding-bottom: 100px; }
.screen.active { display: block; }

/* ===== TOP SCREEN ===== */
.overall-stats {
  background: linear-gradient(135deg, var(--card), #253348);
  border-radius: 16px;
  padding: 20px;
  margin-bottom: 20px;
  text-align: center;
}
.overall-rate {
  font-size: 2.8rem;
  font-weight: 800;
  background: linear-gradient(135deg, var(--accent), var(--teal));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.overall-label {
  font-size: 0.85rem;
  color: var(--text-sub);
  margin-top: 4px;
}
.overall-detail {
  display: flex;
  justify-content: center;
  gap: 24px;
  margin-top: 12px;
  font-size: 0.85rem;
  color: var(--text-sub);
}

/* Chapter Analysis Section */
.section-title {
  font-size: 1rem;
  font-weight: 700;
  margin: 24px 0 12px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.chapter-card {
  background: var(--card);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 12px;
  border-left: 4px solid transparent;
  transition: transform 0.15s;
}
.chapter-card:active { transform: scale(0.98); }
.chapter-card.excellent { border-left-color: var(--green); }
.chapter-card.good { border-left-color: var(--teal); }
.chapter-card.needs-work { border-left-color: var(--orange); }
.chapter-card.weak { border-left-color: var(--red); }

.chapter-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}
.chapter-name {
  font-size: 0.9rem;
  font-weight: 600;
  flex: 1;
  margin-right: 12px;
}
.chapter-rate {
  font-size: 1.3rem;
  font-weight: 800;
}
.chapter-card.excellent .chapter-rate { color: var(--green); }
.chapter-card.good .chapter-rate { color: var(--teal); }
.chapter-card.needs-work .chapter-rate { color: var(--orange); }
.chapter-card.weak .chapter-rate { color: var(--red); }

.chapter-detail {
  font-size: 0.75rem;
  color: var(--text-sub);
  margin-bottom: 8px;
}

.progress-bar {
  width: 100%;
  height: 6px;
  background: rgba(255,255,255,0.1);
  border-radius: 3px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.5s ease;
}
.chapter-card.excellent .progress-fill { background: var(--green); }
.chapter-card.good .progress-fill { background: var(--teal); }
.chapter-card.needs-work .progress-fill { background: var(--orange); }
.chapter-card.weak .progress-fill { background: var(--red); }

.badge {
  display: inline-block;
  font-size: 0.65rem;
  font-weight: 700;
  padding: 2px 8px;
  border-radius: 10px;
  margin-left: 8px;
  vertical-align: middle;
}
.badge.excellent { background: rgba(16,185,129,0.2); color: var(--green); }
.badge.good { background: rgba(6,182,212,0.2); color: var(--teal); }
.badge.needs-work { background: rgba(245,158,11,0.2); color: var(--orange); }
.badge.weak { background: rgba(239,68,68,0.2); color: var(--red); }

/* ===== CHAPTER SELECT ===== */
.chapter-select-card {
  background: var(--card);
  border-radius: 12px;
  padding: 16px;
  margin-bottom: 10px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  cursor: pointer;
  transition: background 0.15s;
}
.chapter-select-card:active { background: var(--card-hover); }
.chapter-select-info h3 { font-size: 0.9rem; font-weight: 600; }
.chapter-select-info p { font-size: 0.75rem; color: var(--text-sub); margin-top: 2px; }
.chapter-select-arrow { color: var(--text-sub); font-size: 1.2rem; }

/* ===== QUIZ SCREEN ===== */
.quiz-progress {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}
.quiz-progress-bar {
  flex: 1;
  height: 4px;
  background: rgba(255,255,255,0.1);
  border-radius: 2px;
}
.quiz-progress-fill {
  height: 100%;
  background: var(--accent);
  border-radius: 2px;
  transition: width 0.3s;
}
.quiz-progress-text {
  font-size: 0.8rem;
  color: var(--text-sub);
  white-space: nowrap;
}

.question-card {
  background: var(--card);
  border-radius: 16px;
  padding: 24px 20px;
  margin-bottom: 16px;
}
.question-number {
  font-size: 0.75rem;
  color: var(--accent);
  font-weight: 700;
  margin-bottom: 8px;
}
.question-text {
  font-size: 1rem;
  line-height: 1.7;
  font-weight: 500;
}

.choices { display: flex; flex-direction: column; gap: 10px; }
.choice-btn {
  background: var(--card);
  border: 2px solid rgba(255,255,255,0.1);
  border-radius: 12px;
  padding: 14px 16px;
  color: var(--text);
  font-size: 0.9rem;
  line-height: 1.5;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
  display: flex;
  align-items: flex-start;
  gap: 10px;
}
.choice-btn:active { transform: scale(0.98); }
.choice-btn:hover { border-color: var(--accent); }
.choice-label {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: rgba(255,255,255,0.1);
  font-size: 0.8rem;
  font-weight: 700;
  flex-shrink: 0;
}
.choice-text { padding-top: 3px; }

.choice-btn.correct {
  border-color: var(--green);
  background: rgba(16,185,129,0.15);
}
.choice-btn.correct .choice-label { background: var(--green); color: #fff; }
.choice-btn.incorrect {
  border-color: var(--red);
  background: rgba(239,68,68,0.15);
}
.choice-btn.incorrect .choice-label { background: var(--red); color: #fff; }
.choice-btn.show-correct {
  border-color: var(--green);
  background: rgba(16,185,129,0.1);
}

/* ===== RESULT (per question) ===== */
.result-box {
  margin-top: 16px;
  padding: 16px;
  border-radius: 12px;
  display: none;
}
.result-box.show { display: block; }
.result-box.correct-result {
  background: rgba(16,185,129,0.1);
  border: 1px solid rgba(16,185,129,0.3);
}
.result-box.incorrect-result {
  background: rgba(239,68,68,0.1);
  border: 1px solid rgba(239,68,68,0.3);
}
.result-icon {
  font-size: 1.5rem;
  margin-bottom: 8px;
}
.result-explanation {
  font-size: 0.85rem;
  line-height: 1.6;
  color: var(--text-sub);
  margin-top: 8px;
}

.next-btn, .copy-btn {
  width: 100%;
  padding: 14px;
  border-radius: 12px;
  border: none;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  margin-top: 12px;
  transition: all 0.15s;
}
.next-btn {
  background: var(--accent);
  color: #fff;
}
.next-btn:hover { background: var(--accent-hover); }
.copy-btn {
  background: rgba(255,255,255,0.1);
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.2);
  font-size: 0.85rem;
}
.copy-btn:active { background: rgba(255,255,255,0.2); }
.copy-btn.copied {
  background: rgba(16,185,129,0.2);
  border-color: var(--green);
  color: var(--green);
}

/* ===== SUMMARY SCREEN ===== */
.summary-hero {
  text-align: center;
  padding: 40px 20px;
}
.summary-score {
  font-size: 4rem;
  font-weight: 800;
}
.summary-score.great { color: var(--green); }
.summary-score.good { color: var(--teal); }
.summary-score.needs-work { color: var(--orange); }
.summary-score.poor { color: var(--red); }
.summary-label {
  font-size: 1rem;
  color: var(--text-sub);
  margin-top: 4px;
}
.summary-detail {
  display: flex;
  justify-content: center;
  gap: 32px;
  margin-top: 20px;
}
.summary-detail-item { text-align: center; }
.summary-detail-num {
  font-size: 1.5rem;
  font-weight: 700;
}
.summary-detail-label {
  font-size: 0.75rem;
  color: var(--text-sub);
}

.summary-questions { margin-top: 24px; }
.summary-q-item {
  background: var(--card);
  border-radius: 12px;
  padding: 14px 16px;
  margin-bottom: 8px;
  display: flex;
  align-items: flex-start;
  gap: 12px;
}
.summary-q-icon { font-size: 1.2rem; flex-shrink: 0; padding-top: 2px; }
.summary-q-text {
  font-size: 0.85rem;
  line-height: 1.5;
  flex: 1;
}
.summary-q-copy {
  background: none;
  border: 1px solid rgba(255,255,255,0.2);
  color: var(--text-sub);
  font-size: 0.7rem;
  padding: 4px 10px;
  border-radius: 6px;
  cursor: pointer;
  white-space: nowrap;
  flex-shrink: 0;
  transition: all 0.15s;
}
.summary-q-copy:active {
  background: rgba(16,185,129,0.2);
  border-color: var(--green);
  color: var(--green);
}

/* ===== ACTION BUTTONS ===== */
.action-btns {
  display: flex;
  flex-direction: column;
  gap: 10px;
  margin-top: 24px;
}
.btn-primary {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 16px;
  border-radius: 12px;
  font-size: 1rem;
  font-weight: 700;
  cursor: pointer;
  transition: background 0.15s;
}
.btn-primary:hover { background: var(--accent-hover); }
.btn-secondary {
  background: rgba(255,255,255,0.08);
  color: var(--text);
  border: 1px solid rgba(255,255,255,0.15);
  padding: 14px;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.15s;
}
.btn-secondary:hover { background: rgba(255,255,255,0.12); }

/* ===== MODE SELECT ===== */
.mode-cards { display: flex; flex-direction: column; gap: 12px; margin-top: 16px; }
.mode-card {
  background: var(--card);
  border-radius: 12px;
  padding: 20px;
  cursor: pointer;
  border: 2px solid transparent;
  transition: all 0.15s;
}
.mode-card:hover { border-color: var(--accent); }
.mode-card:active { transform: scale(0.98); }
.mode-card h3 { font-size: 1rem; font-weight: 700; margin-bottom: 4px; }
.mode-card p { font-size: 0.8rem; color: var(--text-sub); line-height: 1.4; }

/* ===== NO DATA ===== */
.no-data {
  text-align: center;
  padding: 40px 20px;
  color: var(--text-sub);
}
.no-data-icon { font-size: 3rem; margin-bottom: 12px; }
.no-data p { font-size: 0.9rem; line-height: 1.6; }

/* ===== TOAST ===== */
.toast {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%) translateY(100px);
  background: var(--card);
  color: var(--text);
  padding: 12px 24px;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 600;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
  z-index: 200;
  transition: transform 0.3s ease;
  pointer-events: none;
}
.toast.show {
  transform: translateX(-50%) translateY(0);
}

/* ===== ANIMATIONS ===== */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.fade-in { animation: fadeIn 0.3s ease forwards; }

/* ===== RESET BUTTON ===== */
.reset-area {
  margin-top: 40px;
  text-align: center;
}
.reset-btn {
  background: none;
  border: 1px solid rgba(239,68,68,0.3);
  color: var(--red);
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 0.8rem;
  cursor: pointer;
}
.reset-btn:hover { background: rgba(239,68,68,0.1); }

/* Confirm dialog */
.overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  z-index: 300;
  align-items: center;
  justify-content: center;
}
.overlay.show { display: flex; }
.dialog {
  background: var(--card);
  border-radius: 16px;
  padding: 24px;
  margin: 20px;
  max-width: 320px;
  width: 100%;
  text-align: center;
}
.dialog h3 { font-size: 1.1rem; margin-bottom: 8px; }
.dialog p { font-size: 0.85rem; color: var(--text-sub); margin-bottom: 20px; line-height: 1.5; }
.dialog-btns { display: flex; gap: 10px; }
.dialog-btns button {
  flex: 1;
  padding: 12px;
  border-radius: 10px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  border: none;
}
.dialog-cancel { background: rgba(255,255,255,0.1); color: var(--text); }
.dialog-confirm { background: var(--red); color: #fff; }
</style>
</head>
<body>

<!-- HEADER -->
<div class="header">
  <h1>Gæ¤œå®š å­¦ç¿’ã‚¢ãƒ—ãƒª</h1>
  <div class="header-sub">JDLA Deep Learning for GENERAL</div>
</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<!-- RESET CONFIRM DIALOG -->
<div class="overlay" id="resetOverlay">
  <div class="dialog">
    <h3>ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</h3>
    <p>ã™ã¹ã¦ã®å­¦ç¿’è¨˜éŒ²ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚<br>ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚</p>
    <div class="dialog-btns">
      <button class="dialog-cancel" onclick="closeResetDialog()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="dialog-confirm" onclick="confirmReset()">ãƒªã‚»ãƒƒãƒˆ</button>
    </div>
  </div>
</div>

<!-- ===== SCREEN: TOP ===== -->
<div class="screen active" id="topScreen">
  <div id="overallStats"></div>
  <div id="chapterAnalysis"></div>

  <div class="section-title">å­¦ç¿’ã‚’å§‹ã‚ã‚‹</div>
  <div class="mode-cards">
    <div class="mode-card" onclick="showChapterSelect('normal')">
      <h3>ç« ã‚’é¸ã‚“ã§å­¦ç¿’</h3>
      <p>ç« ã”ã¨ã«å•é¡Œã‚’è§£ã„ã¦ç†è§£åº¦ã‚’ç¢ºèª</p>
    </div>
    <div class="mode-card" onclick="startReviewMode()">
      <h3>é–“é•ãˆãŸå•é¡Œã‚’å¾©ç¿’</h3>
      <p>éå»ã«ä¸æ­£è§£ã ã£ãŸå•é¡Œã‚’é‡ç‚¹çš„ã«å¾©ç¿’</p>
    </div>
    <div class="mode-card" onclick="showChapterSelect('all')">
      <h3>å…¨ç« ãƒ©ãƒ³ãƒ€ãƒ </h3>
      <p>å…¨ç¯„å›²ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«å‡ºé¡Œ</p>
    </div>
  </div>

  <div class="reset-area">
    <button class="reset-btn" onclick="showResetDialog()">å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆ</button>
  </div>
</div>

<!-- ===== SCREEN: CHAPTER SELECT ===== -->
<div class="screen" id="chapterSelectScreen">
  <div class="section-title">
    <span onclick="goTop()" style="cursor:pointer;">â†</span>
    ç« ã‚’é¸æŠ
  </div>
  <div id="chapterList"></div>
</div>

<!-- ===== SCREEN: QUIZ ===== -->
<div class="screen" id="quizScreen">
  <div class="quiz-progress">
    <span onclick="confirmQuit()" style="cursor:pointer;font-size:1.2rem;">â†</span>
    <div class="quiz-progress-bar">
      <div class="quiz-progress-fill" id="quizProgressFill"></div>
    </div>
    <div class="quiz-progress-text" id="quizProgressText">1/10</div>
  </div>
  <div id="quizContent"></div>
</div>

<!-- ===== SCREEN: SUMMARY ===== -->
<div class="screen" id="summaryScreen">
  <div id="summaryContent"></div>
</div>

<script>
// ===== QUESTION DATA =====
// Gæ¤œå®šã‚·ãƒ©ãƒã‚¹2024æ”¹è¨‚ç‰ˆæº–æ‹  - ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå„ç« 3-5å•ï¼‰
const QUESTIONS = [
  // --- ç¬¬1ç« : äººå·¥çŸ¥èƒ½(AI)ã¨ã¯ ---
  {
    id: 1, chapter: 1, chapterName: "äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã¨ã¯",
    question: "ç¬¬1æ¬¡AIãƒ–ãƒ¼ãƒ ï¼ˆ1950å¹´ä»£å¾ŒåŠã€œ1960å¹´ä»£ï¼‰ã®ä¸­å¿ƒæŠ€è¡“ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: ["çŸ¥è­˜è¡¨ç¾ã¨ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ", "æ¨è«–ã¨æ¢ç´¢", "æ©Ÿæ¢°å­¦ç¿’ã¨ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°", "ç”ŸæˆAIã¨å¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«"],
    correct: 1,
    explanation: "ç¬¬1æ¬¡AIãƒ–ãƒ¼ãƒ ã§ã¯ã€Œæ¨è«–ãƒ»æ¢ç´¢ã€ãŒä¸­å¿ƒæŠ€è¡“ã§ã—ãŸã€‚è¿·è·¯å•é¡Œã‚„ãƒ‘ã‚ºãƒ«ã®è§£æ³•ãŒç ”ç©¶ã•ã‚Œã¾ã—ãŸãŒã€ãƒˆã‚¤ãƒ»ãƒ—ãƒ­ãƒ–ãƒ¬ãƒ ï¼ˆç°¡ç•¥åŒ–ã•ã‚ŒãŸå•é¡Œï¼‰ã—ã‹è§£ã‘ãªã„ã¨ã„ã†é™ç•ŒãŒã‚ã‚Šã¾ã—ãŸã€‚"
  },
  {
    id: 2, chapter: 1, chapterName: "äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã¨ã¯",
    question: "ã€ŒAIãŒæ–°ãŸãªæˆæœã‚’é”æˆã™ã‚‹ã¨ã€ãã®åŸç†ãŒè§£æ˜ã•ã‚ŒãŸç¬é–“ã«ã€ãã‚Œã¯çœŸã®çŸ¥èƒ½ã§ã¯ãªã„ã€ã¨è¦‹ãªã•ã‚Œã‚‹å¿ƒç†ç¾è±¡ã€ã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚",
    choices: ["ãƒ•ãƒ¬ãƒ¼ãƒ å•é¡Œ", "ã‚·ãƒ³ãƒœãƒ«ã‚°ãƒ©ã‚¦ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å•é¡Œ", "AIåŠ¹æœ", "ä¸­å›½èªã®éƒ¨å±‹"],
    correct: 2,
    explanation: "AIåŠ¹æœã¨ã¯ã€AIãŒä½•ã‹ã‚’é”æˆã—ã¦ã‚‚ã€Œãã‚Œã¯æœ¬å½“ã®çŸ¥èƒ½ã§ã¯ãªã„ã€ã¨è©•ä¾¡ãŒå¤‰ã‚ã‚‹ç¾è±¡ã§ã™ã€‚ãƒã‚§ã‚¹ã‚„å°†æ£‹AIã§ã‚‚è¦‹ã‚‰ã‚Œã¾ã—ãŸã€‚"
  },
  {
    id: 3, chapter: 1, chapterName: "äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã¨ã¯",
    question: "ç¬¬2æ¬¡AIãƒ–ãƒ¼ãƒ ã«ãŠã‘ã‚‹ã€ŒçŸ¥è­˜ç²å¾—ã®ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã€ã¨ã¯ä½•ã‚’æŒ‡ã™ã‹ã€‚",
    choices: ["ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®è¨ˆç®—é€Ÿåº¦ãŒé…ã™ãã‚‹ã“ã¨", "çŸ¥è­˜ã‚’ã™ã¹ã¦äººæ‰‹ã§å…¥åŠ›ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã‚³ã‚¹ãƒˆãŒè†¨å¤§ã§ã‚ã‚‹ã“ã¨", "ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãŒæ™®åŠã—ã¦ã„ãªã‹ã£ãŸã“ã¨", "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãŒã¾ã ç™ºæ˜ã•ã‚Œã¦ã„ãªã‹ã£ãŸã“ã¨"],
    correct: 1,
    explanation: "ç¬¬2æ¬¡AIãƒ–ãƒ¼ãƒ ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã¯ã€å°‚é–€å®¶ã®çŸ¥è­˜ã‚’ã™ã¹ã¦æ‰‹å‹•ã§ãƒ«ãƒ¼ãƒ«åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ãã®ã‚³ã‚¹ãƒˆãŒè†¨å¤§ã§å®Ÿç”¨ç¯„å›²ãŒé™å®šã•ã‚Œã¾ã—ãŸã€‚"
  },
  {
    id: 4, chapter: 1, chapterName: "äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã¨ã¯",
    question: "1956å¹´ã«ã€Œäººå·¥çŸ¥èƒ½ï¼ˆArtificial Intelligenceï¼‰ã€ã¨ã„ã†ç”¨èªã‚’åˆã‚ã¦ä½¿ç”¨ã—ãŸä¼šè­°ã¯ã©ã‚Œã‹ã€‚",
    choices: ["ãƒãƒ¥ãƒ¼ãƒªãƒ³ã‚°ä¼šè­°", "ãƒ€ãƒ¼ãƒˆãƒã‚¹ä¼šè­°", "IEEEå›½éš›ä¼šè­°", "NeurIPS"],
    correct: 1,
    explanation: "1956å¹´ã®ãƒ€ãƒ¼ãƒˆãƒã‚¹ä¼šè­°ã§ã€ã‚¸ãƒ§ãƒ³ãƒ»ãƒãƒƒã‚«ãƒ¼ã‚·ãƒ¼ã‚‰ãŒã€ŒArtificial Intelligenceã€ã¨ã„ã†ç”¨èªã‚’æå”±ã—ã¾ã—ãŸã€‚ã“ã‚ŒãŒAIç ”ç©¶ã®å‡ºç™ºç‚¹ã¨ã•ã‚Œã¦ã„ã¾ã™ã€‚"
  },

  // --- ç¬¬2ç« : äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘ ---
  {
    id: 5, chapter: 2, chapterName: "äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘",
    question: "2012å¹´ã«ImageNetã®ç”»åƒèªè­˜ã‚³ãƒ³ãƒšãƒ†ã‚£ã‚·ãƒ§ãƒ³(ILSVRC)ã§åœ§å€’çš„ãªæˆç¸¾ã‚’åã‚ã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ãƒ–ãƒ¼ãƒ ã®ç«ä»˜ã‘å½¹ã¨ãªã£ãŸãƒ¢ãƒ‡ãƒ«ã¯ã©ã‚Œã‹ã€‚",
    choices: ["VGGNet", "AlexNet", "GoogLeNet", "ResNet"],
    correct: 1,
    explanation: "AlexNetï¼ˆ2012å¹´ï¼‰ãŒILSVRCã§å¾“æ¥æ‰‹æ³•ã‚’å¤§ããä¸Šå›ã‚‹æˆç¸¾ã‚’åã‚ã€ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ï¼ˆæ·±å±¤å­¦ç¿’ï¼‰ã¸ã®æ³¨ç›®ãŒä¸€æ°—ã«é«˜ã¾ã‚Šã¾ã—ãŸã€‚"
  },
  {
    id: 6, chapter: 2, chapterName: "äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘",
    question: "AlphaGoãŒä¸–ç•Œãƒˆãƒƒãƒ—ã‚¯ãƒ©ã‚¹ã®å›²ç¢æ£‹å£«ã«å‹åˆ©ã—ãŸéš›ã«ç”¨ã„ã‚‰ã‚ŒãŸä¸»ãªæŠ€è¡“ã®çµ„ã¿åˆã‚ã›ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: ["ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ ã¨ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹", "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã¨å¼·åŒ–å­¦ç¿’", "ã‚µãƒãƒ¼ãƒˆãƒ™ã‚¯ã‚¿ãƒ¼ãƒã‚·ãƒ³ã¨æ±ºå®šæœ¨", "éºä¼çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ãƒ™ã‚¤ã‚ºæ¨å®š"],
    correct: 1,
    explanation: "Google DeepMindã®AlphaGoã¯ã€CNNã«ã‚ˆã‚‹å±€é¢è©•ä¾¡ï¼ˆãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ï¼‰ã¨ã€ãƒ¢ãƒ³ãƒ†ã‚«ãƒ«ãƒ­æœ¨æ¢ç´¢ã‚’çµ„ã¿åˆã‚ã›ãŸå¼·åŒ–å­¦ç¿’ã‚’ä½¿ã£ã¦äººé–“ã®ãƒˆãƒƒãƒ—æ£‹å£«ã‚’ç ´ã‚Šã¾ã—ãŸã€‚"
  },
  {
    id: 7, chapter: 2, chapterName: "äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘",
    question: "ç‰¹åŒ–å‹AIï¼ˆNarrow AIï¼‰ã¨æ±ç”¨AIï¼ˆAGIï¼‰ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "ç‰¹åŒ–å‹AIã¯è¤‡æ•°ã®ã‚¿ã‚¹ã‚¯ã‚’åŒæ™‚ã«ã“ãªã›ã‚‹ãŒã€æ±ç”¨AIã¯1ã¤ã®ã‚¿ã‚¹ã‚¯ã«ç‰¹åŒ–ã™ã‚‹",
      "ç¾åœ¨å®Ÿç”¨åŒ–ã•ã‚Œã¦ã„ã‚‹AIã¯ã™ã¹ã¦ç‰¹åŒ–å‹AIã§ã‚ã‚Šã€æ±ç”¨AIã¯ã¾ã å®Ÿç¾ã—ã¦ã„ãªã„",
      "æ±ç”¨AIã¯ã™ã§ã«ChatGPTã«ã‚ˆã£ã¦å®Ÿç¾ã•ã‚ŒãŸ",
      "ç‰¹åŒ–å‹AIã¨æ±ç”¨AIã«æœ¬è³ªçš„ãªé•ã„ã¯ãªã„"
    ],
    correct: 1,
    explanation: "ç¾åœ¨ã®AIã¯ã™ã¹ã¦ç‰¹åŒ–å‹AIï¼ˆNarrow AIï¼‰ã§ã™ã€‚äººé–“ã®ã‚ˆã†ã«å¤šæ§˜ãªã‚¿ã‚¹ã‚¯ã‚’ã“ãªã›ã‚‹æ±ç”¨AIï¼ˆAGI: Artificial General Intelligenceï¼‰ã¯ã¾ã å®Ÿç¾ã—ã¦ã„ã¾ã›ã‚“ã€‚"
  },

  // --- ç¬¬3ç« : æ©Ÿæ¢°å­¦ç¿’ã®å…·ä½“çš„æ‰‹æ³• ---
  {
    id: 8, chapter: 3, chapterName: "æ©Ÿæ¢°å­¦ç¿’ã®å…·ä½“çš„æ‰‹æ³•",
    question: "æ•™å¸«ã‚ã‚Šå­¦ç¿’ã€æ•™å¸«ãªã—å­¦ç¿’ã€å¼·åŒ–å­¦ç¿’ã®èª¬æ˜ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "æ•™å¸«ã‚ã‚Šå­¦ç¿’ã¯æ­£è§£ãƒ©ãƒ™ãƒ«ä»˜ããƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’ã—ã€æ•™å¸«ãªã—å­¦ç¿’ã¯ãƒ©ãƒ™ãƒ«ãªã—ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ§‹é€ ã‚’ç™ºè¦‹ã™ã‚‹",
      "æ•™å¸«ãªã—å­¦ç¿’ã¯æ•™å¸«ã‚ã‚Šå­¦ç¿’ã‚ˆã‚Šã‚‚ç²¾åº¦ãŒé«˜ã„",
      "å¼·åŒ–å­¦ç¿’ã«ã¯å¿…ãšæ­£è§£ãƒ©ãƒ™ãƒ«ãŒå¿…è¦ã§ã‚ã‚‹",
      "æ•™å¸«ã‚ã‚Šå­¦ç¿’ã§ã¯ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãŒä¸»ãªã‚¿ã‚¹ã‚¯ã§ã‚ã‚‹"
    ],
    correct: 0,
    explanation: "æ•™å¸«ã‚ã‚Šå­¦ç¿’ã¯æ­£è§£ãƒ©ãƒ™ãƒ«ä»˜ããƒ‡ãƒ¼ã‚¿ã§å­¦ç¿’ï¼ˆåˆ†é¡ãƒ»å›å¸°ï¼‰ã€æ•™å¸«ãªã—å­¦ç¿’ã¯ãƒ©ãƒ™ãƒ«ãªã—ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ§‹é€ ã‚’ç™ºè¦‹ï¼ˆã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°ãƒ»æ¬¡å…ƒå‰Šæ¸›ï¼‰ã€å¼·åŒ–å­¦ç¿’ã¯å ±é…¬ã‚’æœ€å¤§åŒ–ã™ã‚‹è¡Œå‹•ã‚’å­¦ç¿’ã—ã¾ã™ã€‚"
  },
  {
    id: 9, chapter: 3, chapterName: "æ©Ÿæ¢°å­¦ç¿’ã®å…·ä½“çš„æ‰‹æ³•",
    question: "éå­¦ç¿’ï¼ˆOverfittingï¼‰ã®å¯¾ç­–ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: ["æ­£å‰‡åŒ–ï¼ˆL1/L2ï¼‰ã‚’é©ç”¨ã™ã‚‹", "è¨“ç·´ãƒ‡ãƒ¼ã‚¿ã®é‡ã‚’å¢—ã‚„ã™", "ãƒ¢ãƒ‡ãƒ«ã®è¤‡é›‘ã•ã‚’å¢—å¤§ã•ã›ã‚‹", "ãƒ‰ãƒ­ãƒƒãƒ—ã‚¢ã‚¦ãƒˆã‚’ä½¿ç”¨ã™ã‚‹"],
    correct: 2,
    explanation: "éå­¦ç¿’ã¯ãƒ¢ãƒ‡ãƒ«ãŒè¨“ç·´ãƒ‡ãƒ¼ã‚¿ã«éåº¦ã«é©åˆã™ã‚‹ç¾è±¡ã§ã™ã€‚ãƒ¢ãƒ‡ãƒ«ã®è¤‡é›‘ã•ã‚’å¢—å¤§ã•ã›ã‚‹ã¨éå­¦ç¿’ãŒæ‚ªåŒ–ã—ã¾ã™ã€‚æ­£å‰‡åŒ–ã€ãƒ‡ãƒ¼ã‚¿æ‹¡å¼µã€ãƒ‰ãƒ­ãƒƒãƒ—ã‚¢ã‚¦ãƒˆã€æ—©æœŸçµ‚äº†ãªã©ãŒæœ‰åŠ¹ãªå¯¾ç­–ã§ã™ã€‚"
  },
  {
    id: 10, chapter: 3, chapterName: "æ©Ÿæ¢°å­¦ç¿’ã®å…·ä½“çš„æ‰‹æ³•",
    question: "æ··åŒè¡Œåˆ—ã«ãŠã„ã¦TP=80, FP=20, FN=10, TN=90ã®ã¨ãã€é©åˆç‡ï¼ˆPrecisionï¼‰ã¯ã„ãã¤ã‹ã€‚",
    choices: ["80%", "89%", "ç´„73%", "ç´„67%"],
    correct: 0,
    explanation: "é©åˆç‡ = TP / (TP + FP) = 80 / (80 + 20) = 80%ã€‚é©åˆç‡ã¯ã€Œé™½æ€§ã¨äºˆæ¸¬ã—ãŸã‚‚ã®ã®ã†ã¡ã€å®Ÿéš›ã«é™½æ€§ã ã£ãŸå‰²åˆã€ã‚’ç¤ºã—ã¾ã™ã€‚"
  },

  // --- ç¬¬4ç« : ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦ ---
  {
    id: 11, chapter: 4, chapterName: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦",
    question: "ç•³ã¿è¾¼ã¿ãƒ‹ãƒ¥ãƒ¼ãƒ©ãƒ«ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼ˆCNNï¼‰ã®æ§‹æˆè¦ç´ ã¨ã—ã¦é©åˆ‡ã§ãªã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: ["ç•³ã¿è¾¼ã¿å±¤", "ãƒ—ãƒ¼ãƒªãƒ³ã‚°å±¤", "å¿˜å´ã‚²ãƒ¼ãƒˆ", "å…¨çµåˆå±¤"],
    correct: 2,
    explanation: "å¿˜å´ã‚²ãƒ¼ãƒˆã¯LSTMï¼ˆLong Short-Term Memoryï¼‰ã®æ§‹æˆè¦ç´ ã§ã™ã€‚CNNã¯ç•³ã¿è¾¼ã¿å±¤ã€ãƒ—ãƒ¼ãƒªãƒ³ã‚°å±¤ã€å…¨çµåˆå±¤ã§æ§‹æˆã•ã‚Œã¾ã™ã€‚"
  },
  {
    id: 12, chapter: 4, chapterName: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦",
    question: "ResNetï¼ˆ2015å¹´ï¼‰ãŒæ·±ã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å­¦ç¿’ã‚’å¯èƒ½ã«ã—ãŸæŠ€è¡“çš„è¦å› ã¯ã©ã‚Œã‹ã€‚",
    choices: ["å¤§è¦æ¨¡ãªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚µã‚¤ã‚ºã®æ¡ç”¨", "æ®‹å·®æ¥ç¶šï¼ˆSkip Connectionï¼‰ã®å°å…¥", "ãƒ—ãƒ¼ãƒªãƒ³ã‚°å±¤ã®å»ƒæ­¢", "å…¨çµåˆå±¤ã®ã¿ã§æ§‹æˆ"],
    correct: 1,
    explanation: "ResNetã¯æ®‹å·®æ¥ç¶šï¼ˆSkip Connectionï¼‰ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€å‹¾é…æ¶ˆå¤±å•é¡Œã‚’ç·©å’Œã—ã€100å±¤ã‚’è¶…ãˆã‚‹éå¸¸ã«æ·±ã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å­¦ç¿’ã‚’å¯èƒ½ã«ã—ã¾ã—ãŸã€‚"
  },
  {
    id: 13, chapter: 4, chapterName: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦",
    question: "RNNã®å‹¾é…æ¶ˆå¤±å•é¡Œã‚’è§£æ±ºã™ã‚‹ãŸã‚ã«é–‹ç™ºã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã©ã‚Œã‹ã€‚",
    choices: ["AlexNet", "LSTM", "VGG", "U-Net"],
    correct: 1,
    explanation: "LSTMï¼ˆLong Short-Term Memoryï¼‰ã¯ã‚»ãƒ«ã¨3ã¤ã®ã‚²ãƒ¼ãƒˆï¼ˆå…¥åŠ›ãƒ»å¿˜å´ãƒ»å‡ºåŠ›ï¼‰ã‚’æŒã¡ã€é•·æœŸçš„ãªä¾å­˜é–¢ä¿‚ã®å­¦ç¿’ã‚’å¯èƒ½ã«ã—ã¾ã—ãŸã€‚"
  },

  // --- ç¬¬5ç« : ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ‰‹æ³• ---
  {
    id: 14, chapter: 5, chapterName: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ‰‹æ³•",
    question: "Transformerã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç‰¹å¾´ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "RNNã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸé€æ¬¡å‡¦ç†ãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹",
      "Attentionæ©Ÿæ§‹ã‚’ç”¨ã„ãŸä¸¦åˆ—å‡¦ç†ãŒå¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹",
      "CNNã‚’è‡ªç„¶è¨€èªå‡¦ç†ã«å¿œç”¨ã—ãŸãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹",
      "å¼·åŒ–å­¦ç¿’å°‚ç”¨ã«è¨­è¨ˆã•ã‚ŒãŸãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹"
    ],
    correct: 1,
    explanation: "Transformerï¼ˆ2017å¹´ã€Googleã€ŒAttention is All You Needã€ï¼‰ã¯Self-Attentionæ©Ÿæ§‹ã‚’ç”¨ã„ã€RNNã‚’ä½¿ã‚ãšä¸¦åˆ—å‡¦ç†ãŒå¯èƒ½ã§ã™ã€‚ç¾åœ¨ã®LLMã®åŸºç›¤æŠ€è¡“ã§ã™ã€‚"
  },
  {
    id: 15, chapter: 5, chapterName: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ‰‹æ³•",
    question: "BERTï¼ˆBidirectional Encoder Representations from Transformersï¼‰ã®ç‰¹å¾´ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "æ–‡ç« ã‚’å·¦ã‹ã‚‰å³ã¸ã®ä¸€æ–¹å‘ã®ã¿ã§å‡¦ç†ã™ã‚‹",
      "åŒæ–¹å‘ã®æ–‡è„ˆã‚’è€ƒæ…®ã—ã¦ãƒ†ã‚­ã‚¹ãƒˆã‚’ç†è§£ã™ã‚‹",
      "ç”»åƒç”Ÿæˆã«ç‰¹åŒ–ã—ãŸãƒ¢ãƒ‡ãƒ«ã§ã‚ã‚‹",
      "å¼·åŒ–å­¦ç¿’ã§è¨“ç·´ã•ã‚Œã‚‹"
    ],
    correct: 1,
    explanation: "BERTã¯åŒæ–¹å‘ï¼ˆBidirectionalï¼‰ã®Transformerã‚¨ãƒ³ã‚³ãƒ¼ãƒ€ã‚’ä½¿ã„ã€æ–‡è„ˆã®å‰å¾Œä¸¡æ–¹ã‹ã‚‰å˜èªã®æ„å‘³ã‚’ç†è§£ã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šè‡ªç„¶è¨€èªç†è§£ã‚¿ã‚¹ã‚¯ã§ç”»æœŸçš„ãªæˆæœã‚’ä¸Šã’ã¾ã—ãŸã€‚"
  },

  // --- ç¬¬6ç« : ç”ŸæˆAI ---
  {
    id: 16, chapter: 6, chapterName: "ç”ŸæˆAI",
    question: "LLMï¼ˆå¤§è¦æ¨¡è¨€èªãƒ¢ãƒ‡ãƒ«ï¼‰ãŒäº‹å®Ÿã¨ç•°ãªã‚‹æƒ…å ±ã‚’ã‚‚ã£ã¨ã‚‚ã‚‰ã—ãç”Ÿæˆã™ã‚‹ç¾è±¡ã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚",
    choices: ["éå­¦ç¿’", "ãƒã‚¤ã‚¢ã‚¹", "ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³", "ãƒ‰ãƒªãƒ•ãƒˆ"],
    correct: 2,
    explanation: "ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆHallucinationï¼‰ã¯ã€LLMãŒäº‹å®Ÿã«åŸºã¥ã‹ãªã„æƒ…å ±ã‚’ã‚‚ã£ã¨ã‚‚ã‚‰ã—ãç”Ÿæˆã—ã¦ã—ã¾ã†ç¾è±¡ã§ã™ã€‚LLMã®é‡è¦ãªèª²é¡Œã®ä¸€ã¤ã§ã™ã€‚"
  },
  {
    id: 17, chapter: 6, chapterName: "ç”ŸæˆAI",
    question: "RAGï¼ˆRetrieval-Augmented Generationï¼‰ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "ãƒ¢ãƒ‡ãƒ«ã‚’ä¸€ã‹ã‚‰å†è¨“ç·´ã™ã‚‹æ‰‹æ³•",
      "å¤–éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚’æ¤œç´¢ãƒ»å‚ç…§ã—ã¦LLMã®å›ç­”ç²¾åº¦ã‚’é«˜ã‚ã‚‹æ‰‹æ³•",
      "ç”»åƒã‹ã‚‰æ–‡ç« ã‚’ç”Ÿæˆã™ã‚‹æ‰‹æ³•",
      "ãƒ¢ãƒ‡ãƒ«ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ã‚’å‰Šæ¸›ã™ã‚‹æ‰‹æ³•"
    ],
    correct: 1,
    explanation: "RAGï¼ˆæ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼‰ã¯ã€ç¤¾å†…æ–‡æ›¸ã‚„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãªã©ã®å¤–éƒ¨æƒ…å ±ã‚’æ¤œç´¢ã—ã€ãã®çµæœã‚’LLMã«æ¸¡ã—ã¦å›ç­”ã‚’ç”Ÿæˆã•ã›ã‚‹æ‰‹æ³•ã§ã™ã€‚ãƒãƒ«ã‚·ãƒãƒ¼ã‚·ãƒ§ãƒ³è»½æ¸›ã«æœ‰åŠ¹ã§ã™ã€‚"
  },
  {
    id: 18, chapter: 6, chapterName: "ç”ŸæˆAI",
    question: "RLHFï¼ˆReinforcement Learning from Human Feedbackï¼‰ã®ç›®çš„ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "ãƒ¢ãƒ‡ãƒ«ã®è¨ˆç®—é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹",
      "äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ç”¨ã„ã¦ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã‚’äººé–“ã®æœŸå¾…ã«æ²¿ã‚ã›ã‚‹",
      "ç”»åƒèªè­˜ã®ç²¾åº¦ã‚’ä¸Šã’ã‚‹",
      "å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®é‡ã‚’å‰Šæ¸›ã™ã‚‹"
    ],
    correct: 1,
    explanation: "RLHFã¯äººé–“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼ˆå¥½ã¿ã®åˆ¤å®šï¼‰ã‚’å ±é…¬ã¨ã—ã¦å¼·åŒ–å­¦ç¿’ã‚’è¡Œã„ã€ãƒ¢ãƒ‡ãƒ«ã®å‡ºåŠ›ã‚’äººé–“ã®æ„å›³ã‚„ä¾¡å€¤è¦³ã«åˆã‚ã›ã‚‹æ‰‹æ³•ã§ã™ã€‚ChatGPTãªã©ã§ä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚"
  },

  // --- ç¬¬7ç« : AIã®ç¤¾ä¼šå®Ÿè£…ãƒ»é‹ç”¨ ---
  {
    id: 19, chapter: 7, chapterName: "AIã®ç¤¾ä¼šå®Ÿè£…ãƒ»é‹ç”¨",
    question: "AIãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãŠã„ã¦ã€å°å…¥å¾Œã«ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦ãŒæ™‚é–“ã¨ã¨ã‚‚ã«ä½ä¸‹ã™ã‚‹ç¾è±¡ã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚",
    choices: ["éå­¦ç¿’", "ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ•ãƒˆ", "æ­£å‰‡åŒ–", "ãƒãƒƒãƒæ­£è¦åŒ–"],
    correct: 1,
    explanation: "ãƒ‡ãƒ¼ã‚¿ãƒ‰ãƒªãƒ•ãƒˆã¨ã¯ã€é‹ç”¨ä¸­ã«ãƒ‡ãƒ¼ã‚¿ã®åˆ†å¸ƒãŒå­¦ç¿’æ™‚ã¨å¤‰åŒ–ã—ã€ãƒ¢ãƒ‡ãƒ«ã®ç²¾åº¦ãŒä½ä¸‹ã™ã‚‹ç¾è±¡ã§ã™ã€‚å®šæœŸçš„ãªãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°ã¨å†å­¦ç¿’ãŒå¿…è¦ã§ã™ã€‚"
  },
  {
    id: 20, chapter: 7, chapterName: "AIã®ç¤¾ä¼šå®Ÿè£…ãƒ»é‹ç”¨",
    question: "MLOpsã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "æ©Ÿæ¢°å­¦ç¿’ãƒ¢ãƒ‡ãƒ«ã®é–‹ç™ºãƒ»é‹ç”¨ãƒ»ç›£è¦–ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ãŸã‚ã®æ‰‹æ³•ãƒ»ä»•çµ„ã¿",
      "æ©Ÿæ¢°å­¦ç¿’ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’é«˜é€ŸåŒ–ã™ã‚‹æŠ€è¡“",
      "ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®é‹ç”¨ç®¡ç†æ‰‹æ³•",
      "AIã®å€«ç†ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã®ç­–å®šãƒ—ãƒ­ã‚»ã‚¹"
    ],
    correct: 0,
    explanation: "MLOpsã¯DevOpsã®è€ƒãˆæ–¹ã‚’æ©Ÿæ¢°å­¦ç¿’ã«é©ç”¨ã—ã€ãƒ¢ãƒ‡ãƒ«ã®é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ»ç›£è¦–ãƒ»å†å­¦ç¿’ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’åŠ¹ç‡çš„ã«ç®¡ç†ã™ã‚‹ãŸã‚ã®æ‰‹æ³•ãƒ»ä»•çµ„ã¿ã§ã™ã€‚"
  },

  // --- ç¬¬8ç« : æ•°ç†ãƒ»çµ±è¨ˆ ---
  {
    id: 21, chapter: 8, chapterName: "æ•°ç†ãƒ»çµ±è¨ˆ",
    question: "ç¢ºç‡åˆ†å¸ƒã«ãŠã„ã¦ã€å¹³å‡å€¤ã‚’ä¸­å¿ƒã«å·¦å³å¯¾ç§°ãªãƒ™ãƒ«å‹ã®åˆ†å¸ƒã‚’ä½•ã¨å‘¼ã¶ã‹ã€‚",
    choices: ["ãƒã‚¢ã‚½ãƒ³åˆ†å¸ƒ", "æ­£è¦åˆ†å¸ƒï¼ˆã‚¬ã‚¦ã‚¹åˆ†å¸ƒï¼‰", "ä¸€æ§˜åˆ†å¸ƒ", "ãƒ™ãƒ«ãƒŒãƒ¼ã‚¤åˆ†å¸ƒ"],
    correct: 1,
    explanation: "æ­£è¦åˆ†å¸ƒï¼ˆã‚¬ã‚¦ã‚¹åˆ†å¸ƒï¼‰ã¯å¹³å‡å€¤ã‚’ä¸­å¿ƒã«å·¦å³å¯¾ç§°ãªãƒ™ãƒ«å‹ã®ã‚«ãƒ¼ãƒ–ã‚’æãé€£ç¶šç¢ºç‡åˆ†å¸ƒã§ã€è‡ªç„¶ç•Œã®å¤šãã®ç¾è±¡ã‚’è¿‘ä¼¼ã§ãã¾ã™ã€‚"
  },
  {
    id: 22, chapter: 8, chapterName: "æ•°ç†ãƒ»çµ±è¨ˆ",
    question: "ãƒ™ã‚¤ã‚ºã®å®šç†ã®èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãããªã‚‹ã¨æ¨™æœ¬å¹³å‡ãŒæ¯å¹³å‡ã«è¿‘ã¥ã",
      "äº‹å‰ç¢ºç‡ã¨å°¤åº¦ã‹ã‚‰äº‹å¾Œç¢ºç‡ã‚’æ±‚ã‚ã‚‹å®šç†",
      "2ã¤ã®å¤‰æ•°ã®ç›¸é–¢é–¢ä¿‚ã‚’è¡¨ã™æŒ‡æ¨™",
      "ãƒ‡ãƒ¼ã‚¿ã®åˆ†æ•£ã‚’æœ€å°ã«ã™ã‚‹æ‰‹æ³•"
    ],
    correct: 1,
    explanation: "ãƒ™ã‚¤ã‚ºã®å®šç†ã¯ã€äº‹å‰ç¢ºç‡ï¼ˆäº‹å‰ã®ä¿¡å¿µï¼‰ã«è¦³æ¸¬ãƒ‡ãƒ¼ã‚¿ï¼ˆå°¤åº¦ï¼‰ã‚’æ›ã‘åˆã‚ã›ã¦äº‹å¾Œç¢ºç‡ï¼ˆæ›´æ–°ã•ã‚ŒãŸä¿¡å¿µï¼‰ã‚’è¨ˆç®—ã™ã‚‹å®šç†ã§ã™ã€‚ã‚¹ãƒ‘ãƒ ãƒ•ã‚£ãƒ«ã‚¿ãªã©ã«å¿œç”¨ã•ã‚Œã¾ã™ã€‚"
  },

  // --- ç¬¬9ç« : AIæ³•å¾‹ãƒ»å€«ç†ãƒ»ç¤¾ä¼šå•é¡Œ ---
  {
    id: 23, chapter: 9, chapterName: "AIæ³•å¾‹ãƒ»å€«ç†ãƒ»ç¤¾ä¼šå•é¡Œ",
    question: "EU AIè¦åˆ¶æ³•ï¼ˆAI Actï¼‰ã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "ã™ã¹ã¦ã®AIã‚’ä¸€å¾‹ã«è¦åˆ¶ã™ã‚‹",
      "ãƒªã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§æ®µéšçš„ã«è¦åˆ¶ã™ã‚‹",
      "AIé–‹ç™ºã‚’å…¨é¢çš„ã«ç¦æ­¢ã™ã‚‹",
      "ä¼æ¥­ã®è‡ªä¸»è¦åˆ¶ã«å®Œå…¨ã«å§”ã­ã‚‹"
    ],
    correct: 1,
    explanation: "EU AIè¦åˆ¶æ³•ã¯ãƒªã‚¹ã‚¯ãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ã—ã€è¨±å®¹ã§ããªã„ãƒªã‚¹ã‚¯ï¼ˆç¦æ­¢ï¼‰ã€ãƒã‚¤ãƒªã‚¹ã‚¯ï¼ˆå³æ ¼ãªè¦ä»¶ï¼‰ã€é™å®šãƒªã‚¹ã‚¯ï¼ˆé€æ˜æ€§ç¾©å‹™ï¼‰ã€æœ€å°ãƒªã‚¹ã‚¯ï¼ˆè¦åˆ¶ãªã—ï¼‰ã®4æ®µéšã§è¦åˆ¶ã—ã¾ã™ã€‚"
  },
  {
    id: 24, chapter: 9, chapterName: "AIæ³•å¾‹ãƒ»å€«ç†ãƒ»ç¤¾ä¼šå•é¡Œ",
    question: "æ—¥æœ¬ã®è‘—ä½œæ¨©æ³•ç¬¬30æ¡ã®4ã«é–¢ã™ã‚‹èª¬æ˜ã¨ã—ã¦æœ€ã‚‚é©åˆ‡ãªã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "AIãŒç”Ÿæˆã—ãŸè‘—ä½œç‰©ã¯ã™ã¹ã¦è‘—ä½œæ¨©ã§ä¿è­·ã•ã‚Œã‚‹",
      "æƒ…å ±è§£æç›®çš„ã§ã‚ã‚Œã°è‘—ä½œç‰©ã‚’è¨±è«¾ãªãåˆ©ç”¨ã§ãã‚‹å ´åˆãŒã‚ã‚‹",
      "AIã®å­¦ç¿’ã«ã¯ã™ã¹ã¦è‘—ä½œæ¨©è€…ã®è¨±è«¾ãŒå¿…è¦",
      "è‘—ä½œæ¨©æ³•ã¯AIã«ä¸€åˆ‡é©ç”¨ã•ã‚Œãªã„"
    ],
    correct: 1,
    explanation: "è‘—ä½œæ¨©æ³•ç¬¬30æ¡ã®4ã¯ã€Œæƒ…å ±è§£æã€ç­‰ã®éäº«å—åˆ©ç”¨ã§ã‚ã‚Œã°ã€è‘—ä½œæ¨©è€…ã®è¨±è«¾ãªãè‘—ä½œç‰©ã‚’åˆ©ç”¨ã§ãã‚‹ã¨ã™ã‚‹è¦å®šã§ã™ã€‚AIå­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã®åˆ©ç”¨ã«ãŠã‘ã‚‹é‡è¦ãªæ¡æ–‡ã§ã™ã€‚"
  },
  {
    id: 25, chapter: 9, chapterName: "AIæ³•å¾‹ãƒ»å€«ç†ãƒ»ç¤¾ä¼šå•é¡Œ",
    question: "èª¬æ˜å¯èƒ½AIï¼ˆXAIï¼‰ã®æ‰‹æ³•ã§ã‚ã‚‹LIMEã®ç‰¹å¾´ã¨ã—ã¦æ­£ã—ã„ã‚‚ã®ã¯ã©ã‚Œã‹ã€‚",
    choices: [
      "ãƒ¢ãƒ‡ãƒ«å…¨ä½“ã®æ§‹é€ ã‚’å®Œå…¨ã«å¯è¦–åŒ–ã™ã‚‹",
      "å€‹ã€…ã®äºˆæ¸¬ã«ã¤ã„ã¦ã€å±€æ‰€çš„ã«è§£é‡ˆå¯èƒ½ãªè¿‘ä¼¼ãƒ¢ãƒ‡ãƒ«ã§èª¬æ˜ã™ã‚‹",
      "ãƒ¢ãƒ‡ãƒ«ã®å­¦ç¿’é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹æ‰‹æ³•",
      "ãƒ‡ãƒ¼ã‚¿ã®ç•°å¸¸å€¤ã‚’æ¤œå‡ºã™ã‚‹æ‰‹æ³•"
    ],
    correct: 1,
    explanation: "LIMEï¼ˆLocal Interpretable Model-agnostic Explanationsï¼‰ã¯ã€å€‹ã€…ã®äºˆæ¸¬ã®è¿‘å‚ã‚’å±€æ‰€çš„ã«è¿‘ä¼¼ã™ã‚‹è§£é‡ˆå¯èƒ½ãªãƒ¢ãƒ‡ãƒ«ã‚’ä½œã‚Šã€äºˆæ¸¬ã®æ ¹æ‹ ã‚’èª¬æ˜ã™ã‚‹æ‰‹æ³•ã§ã™ã€‚"
  }
];

// ===== CHAPTER DEFINITIONS =====
const CHAPTERS = {
  1: "äººå·¥çŸ¥èƒ½ï¼ˆAIï¼‰ã¨ã¯",
  2: "äººå·¥çŸ¥èƒ½ã‚’ã‚ãã‚‹å‹•å‘",
  3: "æ©Ÿæ¢°å­¦ç¿’ã®å…·ä½“çš„æ‰‹æ³•",
  4: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ¦‚è¦",
  5: "ãƒ‡ã‚£ãƒ¼ãƒ—ãƒ©ãƒ¼ãƒ‹ãƒ³ã‚°ã®æ‰‹æ³•",
  6: "ç”ŸæˆAI",
  7: "AIã®ç¤¾ä¼šå®Ÿè£…ãƒ»é‹ç”¨",
  8: "æ•°ç†ãƒ»çµ±è¨ˆ",
  9: "AIæ³•å¾‹ãƒ»å€«ç†ãƒ»ç¤¾ä¼šå•é¡Œ"
};

const LABELS = ['A', 'B', 'C', 'D'];

// ===== STATE =====
let progress = loadProgress();
let currentQuiz = [];
let currentIndex = 0;
let quizResults = [];
let currentMode = 'normal';

// ===== LOCAL STORAGE =====
function loadProgress() {
  try {
    const data = localStorage.getItem('gTestProgress');
    return data ? JSON.parse(data) : {};
  } catch { return {}; }
}
function saveProgress() {
  localStorage.setItem('gTestProgress', JSON.stringify(progress));
}

// ===== NAVIGATION =====
function showScreen(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo(0, 0);
}

function goTop() {
  renderTop();
  showScreen('topScreen');
}

// ===== TOP SCREEN =====
function renderTop() {
  renderOverallStats();
  renderChapterAnalysis();
}

function renderOverallStats() {
  const el = document.getElementById('overallStats');
  const allAnswered = Object.keys(progress);
  if (allAnswered.length === 0) {
    el.innerHTML = `
      <div class="no-data fade-in">
        <div class="no-data-icon">ğŸ“š</div>
        <p>ã¾ã å•é¡Œã‚’è§£ã„ã¦ã„ã¾ã›ã‚“ã€‚<br>ä¸‹ã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰å­¦ç¿’ã‚’å§‹ã‚ã¾ã—ã‚‡ã†ï¼</p>
      </div>`;
    return;
  }

  let totalCorrect = 0, totalCount = 0;
  allAnswered.forEach(qid => {
    totalCount++;
    if (progress[qid].correct) totalCorrect++;
  });
  const rate = Math.round((totalCorrect / totalCount) * 100);

  el.innerHTML = `
    <div class="overall-stats fade-in">
      <div class="overall-rate">${rate}%</div>
      <div class="overall-label">å…¨ä½“æ­£ç­”ç‡</div>
      <div class="overall-detail">
        <span>æ­£è§£ ${totalCorrect}å•</span>
        <span>ä¸æ­£è§£ ${totalCount - totalCorrect}å•</span>
        <span>åˆè¨ˆ ${totalCount}å•</span>
      </div>
    </div>`;
}

function renderChapterAnalysis() {
  const el = document.getElementById('chapterAnalysis');
  const allAnswered = Object.keys(progress);
  if (allAnswered.length === 0) {
    el.innerHTML = '';
    return;
  }

  // Calc chapter stats
  const stats = {};
  allAnswered.forEach(qid => {
    const q = QUESTIONS.find(q => q.id === parseInt(qid));
    if (!q) return;
    const ch = q.chapter;
    if (!stats[ch]) stats[ch] = { total: 0, correct: 0, incorrect: 0, name: q.chapterName };
    stats[ch].total++;
    if (progress[qid].correct) stats[ch].correct++;
    else stats[ch].incorrect++;
  });

  // Sort by rate ascending (worst first)
  const sorted = Object.entries(stats).map(([ch, s]) => {
    s.rate = Math.round((s.correct / s.total) * 100);
    s.chapter = ch;
    return s;
  }).sort((a, b) => a.rate - b.rate);

  let html = '<div class="section-title">ç« åˆ¥åˆ†æï¼ˆè‹¦æ‰‹é †ï¼‰</div>';
  sorted.forEach((s, i) => {
    const cls = s.rate >= 80 ? 'excellent' : s.rate >= 60 ? 'good' : s.rate >= 40 ? 'needs-work' : 'weak';
    const label = s.rate >= 80 ? 'å„ªç§€' : s.rate >= 60 ? 'è‰¯å¥½' : s.rate >= 40 ? 'è¦æ”¹å–„' : 'è‹¦æ‰‹';
    html += `
      <div class="chapter-card ${cls} fade-in" style="animation-delay:${i * 0.05}s">
        <div class="chapter-header">
          <div class="chapter-name">ç¬¬${s.chapter}ç« : ${s.name}<span class="badge ${cls}">${label}</span></div>
          <div class="chapter-rate">${s.rate}%</div>
        </div>
        <div class="chapter-detail">æ­£è§£: ${s.correct}å•ã€€ä¸æ­£è§£: ${s.incorrect}å•ã€€åˆè¨ˆ: ${s.total}å•</div>
        <div class="progress-bar"><div class="progress-fill" style="width:${s.rate}%"></div></div>
      </div>`;
  });

  el.innerHTML = html;
}

// ===== CHAPTER SELECT =====
function showChapterSelect(mode) {
  currentMode = mode;
  const el = document.getElementById('chapterList');

  if (mode === 'all') {
    startQuiz(QUESTIONS.slice());
    return;
  }

  let html = '';
  Object.entries(CHAPTERS).forEach(([ch, name]) => {
    const qs = QUESTIONS.filter(q => q.chapter === parseInt(ch));
    html += `
      <div class="chapter-select-card fade-in" onclick="startChapterQuiz(${ch})">
        <div class="chapter-select-info">
          <h3>ç¬¬${ch}ç« : ${name}</h3>
          <p>${qs.length}å•</p>
        </div>
        <div class="chapter-select-arrow">â€º</div>
      </div>`;
  });
  el.innerHTML = html;
  showScreen('chapterSelectScreen');
}

function startChapterQuiz(chapter) {
  const qs = QUESTIONS.filter(q => q.chapter === chapter);
  startQuiz(qs);
}

function startReviewMode() {
  const wrongIds = Object.entries(progress)
    .filter(([_, v]) => !v.correct)
    .map(([id, _]) => parseInt(id));
  const qs = QUESTIONS.filter(q => wrongIds.includes(q.id));
  if (qs.length === 0) {
    showToast('å¾©ç¿’ã™ã‚‹å•é¡ŒãŒã‚ã‚Šã¾ã›ã‚“');
    return;
  }
  currentMode = 'review';
  startQuiz(qs);
}

// ===== QUIZ =====
function startQuiz(questions) {
  // Shuffle
  currentQuiz = questions.sort(() => Math.random() - 0.5);
  currentIndex = 0;
  quizResults = [];
  showScreen('quizScreen');
  renderQuestion();
}

function renderQuestion() {
  const q = currentQuiz[currentIndex];
  const total = currentQuiz.length;
  document.getElementById('quizProgressFill').style.width = `${((currentIndex) / total) * 100}%`;
  document.getElementById('quizProgressText').textContent = `${currentIndex + 1}/${total}`;

  let choicesHtml = '';
  q.choices.forEach((c, i) => {
    choicesHtml += `
      <button class="choice-btn" id="choice${i}" onclick="selectAnswer(${i})">
        <span class="choice-label">${LABELS[i]}</span>
        <span class="choice-text">${c}</span>
      </button>`;
  });

  document.getElementById('quizContent').innerHTML = `
    <div class="question-card fade-in">
      <div class="question-number">ç¬¬${q.chapter}ç« : ${q.chapterName}</div>
      <div class="question-text">${q.question}</div>
    </div>
    <div class="choices fade-in" style="animation-delay:0.1s">
      ${choicesHtml}
    </div>
    <div class="result-box" id="resultBox">
      <div class="result-icon" id="resultIcon"></div>
      <div class="result-explanation" id="resultExplanation"></div>
      <button class="copy-btn" id="copyBtn" onclick="copyQuestion()">å•é¡Œã¨è§£èª¬ã‚’ã‚³ãƒ”ãƒ¼ï¼ˆAIå£æ‰“ã¡ç”¨ï¼‰</button>
      <button class="next-btn" id="nextBtn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
    </div>`;
}

function selectAnswer(selected) {
  const q = currentQuiz[currentIndex];
  const isCorrect = selected === q.correct;

  // Save progress
  progress[q.id] = { correct: isCorrect, lastAnswered: Date.now() };
  saveProgress();

  // Record result
  quizResults.push({ question: q, selected, isCorrect });

  // Disable all buttons
  document.querySelectorAll('.choice-btn').forEach((btn, i) => {
    btn.onclick = null;
    btn.style.cursor = 'default';
    if (i === q.correct) {
      btn.classList.add(isCorrect ? 'correct' : 'show-correct');
    }
    if (i === selected && !isCorrect) {
      btn.classList.add('incorrect');
    }
  });

  // Show result
  const box = document.getElementById('resultBox');
  box.classList.add('show');
  box.classList.add(isCorrect ? 'correct-result' : 'incorrect-result');
  document.getElementById('resultIcon').textContent = isCorrect ? 'â­• æ­£è§£ï¼' : 'âŒ ä¸æ­£è§£';
  document.getElementById('resultExplanation').textContent = q.explanation;

  // Update next button text
  if (currentIndex >= currentQuiz.length - 1) {
    document.getElementById('nextBtn').textContent = 'çµæœã‚’è¦‹ã‚‹';
  }
}

function nextQuestion() {
  currentIndex++;
  if (currentIndex >= currentQuiz.length) {
    showSummary();
  } else {
    renderQuestion();
    window.scrollTo(0, 0);
  }
}

function copyQuestion() {
  const q = currentQuiz[currentIndex];
  const selected = quizResults[quizResults.length - 1].selected;
  const text = `ã€Gæ¤œå®š å•é¡Œã€‘
ç¬¬${q.chapter}ç« : ${q.chapterName}

â–  å•é¡Œ
${q.question}

â–  é¸æŠè‚¢
${q.choices.map((c, i) => `${LABELS[i]}. ${c}`).join('\n')}

â–  æ­£è§£: ${LABELS[q.correct]}. ${q.choices[q.correct]}
â–  è‡ªåˆ†ã®å›ç­”: ${LABELS[selected]}. ${q.choices[selected]}

â–  è§£èª¬
${q.explanation}

---
ã“ã®å•é¡Œã«ã¤ã„ã¦ã•ã‚‰ã«æ·±ãç†è§£ã—ãŸã„ã§ã™ã€‚é–¢é€£ã™ã‚‹æ¦‚å¿µã‚„å®Ÿå‹™ã§ã®å¿œç”¨ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„ã€‚`;

  navigator.clipboard.writeText(text).then(() => {
    const btn = document.getElementById('copyBtn');
    btn.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
    btn.classList.add('copied');
    showToast('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
  }).catch(() => {
    // Fallback
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
    const btn = document.getElementById('copyBtn');
    btn.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼';
    btn.classList.add('copied');
    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
  });
}

function confirmQuit() {
  if (quizResults.length > 0) {
    if (confirm('å­¦ç¿’ã‚’ä¸­æ–­ã—ã¾ã™ã‹ï¼Ÿã“ã“ã¾ã§ã®å›ç­”ã¯ä¿å­˜ã•ã‚Œã¦ã„ã¾ã™ã€‚')) {
      goTop();
    }
  } else {
    goTop();
  }
}

// ===== SUMMARY =====
function showSummary() {
  showScreen('summaryScreen');
  const total = quizResults.length;
  const correct = quizResults.filter(r => r.isCorrect).length;
  const rate = Math.round((correct / total) * 100);
  const cls = rate >= 80 ? 'great' : rate >= 60 ? 'good' : rate >= 40 ? 'needs-work' : 'poor';

  const wrongResults = quizResults.filter(r => !r.isCorrect);

  let wrongHtml = '';
  if (wrongResults.length > 0) {
    wrongHtml = `<div class="section-title" style="margin-top:32px">é–“é•ãˆãŸå•é¡Œ</div>`;
    wrongResults.forEach((r, i) => {
      const q = r.question;
      wrongHtml += `
        <div class="summary-q-item fade-in" style="animation-delay:${i * 0.05}s">
          <div class="summary-q-icon">âŒ</div>
          <div class="summary-q-text">
            <strong>ç¬¬${q.chapter}ç« </strong> ${q.question.substring(0, 60)}...
          </div>
          <button class="summary-q-copy" onclick="copySummaryQuestion(${quizResults.indexOf(r)})">ã‚³ãƒ”ãƒ¼</button>
        </div>`;
    });
  }

  document.getElementById('summaryContent').innerHTML = `
    <div class="summary-hero fade-in">
      <div class="summary-score ${cls}">${rate}%</div>
      <div class="summary-label">æ­£ç­”ç‡</div>
      <div class="summary-detail">
        <div class="summary-detail-item">
          <div class="summary-detail-num" style="color:var(--green)">${correct}</div>
          <div class="summary-detail-label">æ­£è§£</div>
        </div>
        <div class="summary-detail-item">
          <div class="summary-detail-num" style="color:var(--red)">${total - correct}</div>
          <div class="summary-detail-label">ä¸æ­£è§£</div>
        </div>
        <div class="summary-detail-item">
          <div class="summary-detail-num">${total}</div>
          <div class="summary-detail-label">åˆè¨ˆ</div>
        </div>
      </div>
    </div>
    <div class="summary-questions">${wrongHtml}</div>
    ${wrongResults.length > 0 ? `
      <button class="btn-secondary" style="margin-top:16px" onclick="copyAllWrong()">
        é–“é•ãˆãŸå•é¡Œã‚’ã™ã¹ã¦ã‚³ãƒ”ãƒ¼
      </button>` : ''}
    <div class="action-btns">
      <button class="btn-primary" onclick="goTop()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
      ${wrongResults.length > 0 ? `
        <button class="btn-secondary" onclick="retryWrong()">é–“é•ãˆãŸå•é¡Œã ã‘å†æŒ‘æˆ¦</button>
      ` : ''}
    </div>`;
}

function copySummaryQuestion(idx) {
  const r = quizResults[idx];
  const q = r.question;
  const text = `ã€Gæ¤œå®š å•é¡Œã€‘
ç¬¬${q.chapter}ç« : ${q.chapterName}

â–  å•é¡Œ
${q.question}

â–  é¸æŠè‚¢
${q.choices.map((c, i) => `${LABELS[i]}. ${c}`).join('\n')}

â–  æ­£è§£: ${LABELS[q.correct]}. ${q.choices[q.correct]}
â–  è‡ªåˆ†ã®å›ç­”: ${LABELS[r.selected]}. ${q.choices[r.selected]}

â–  è§£èª¬
${q.explanation}

---
ã“ã®å•é¡Œã«ã¤ã„ã¦ã€ãªãœé–“é•ãˆãŸã‹åˆ†æã—ã€é–¢é€£ã™ã‚‹æ¦‚å¿µã‚’æ•™ãˆã¦ãã ã•ã„ã€‚`;

  navigator.clipboard.writeText(text).then(() => {
    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
  }).catch(() => {
    fallbackCopy(text);
    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
  });
}

function copyAllWrong() {
  const wrongs = quizResults.filter(r => !r.isCorrect);
  let text = 'ã€Gæ¤œå®š é–“é•ãˆãŸå•é¡Œã¾ã¨ã‚ã€‘\n\n';
  wrongs.forEach((r, i) => {
    const q = r.question;
    text += `â”â”â” å•é¡Œ${i + 1} â”â”â”
ç¬¬${q.chapter}ç« : ${q.chapterName}

â–  å•é¡Œ
${q.question}

â–  é¸æŠè‚¢
${q.choices.map((c, j) => `${LABELS[j]}. ${c}`).join('\n')}

â–  æ­£è§£: ${LABELS[q.correct]}. ${q.choices[q.correct]}
â–  è‡ªåˆ†ã®å›ç­”: ${LABELS[r.selected]}. ${q.choices[r.selected]}

â–  è§£èª¬
${q.explanation}

`;
  });
  text += `---
ä¸Šè¨˜ã®é–“é•ãˆãŸå•é¡Œã«ã¤ã„ã¦ã€å…±é€šã™ã‚‹å¼±ç‚¹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ†æã—ã€åŠ¹ç‡çš„ãªå¾©ç¿’æ–¹æ³•ã‚’ææ¡ˆã—ã¦ãã ã•ã„ã€‚`;

  navigator.clipboard.writeText(text).then(() => {
    showToast('ã™ã¹ã¦ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
  }).catch(() => {
    fallbackCopy(text);
    showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
  });
}

function retryWrong() {
  const wrongQs = quizResults.filter(r => !r.isCorrect).map(r => r.question);
  startQuiz(wrongQs);
}

// ===== UTILITIES =====
function fallbackCopy(text) {
  const ta = document.createElement('textarea');
  ta.value = text;
  ta.style.position = 'fixed';
  ta.style.left = '-9999px';
  document.body.appendChild(ta);
  ta.select();
  document.execCommand('copy');
  document.body.removeChild(ta);
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

function showResetDialog() {
  document.getElementById('resetOverlay').classList.add('show');
}
function closeResetDialog() {
  document.getElementById('resetOverlay').classList.remove('show');
}
function confirmReset() {
  progress = {};
  localStorage.removeItem('gTestProgress');
  closeResetDialog();
  showToast('ãƒ‡ãƒ¼ã‚¿ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã—ãŸ');
  goTop();
}

// ===== INIT =====
renderTop();
</script>
</body>
</html>

